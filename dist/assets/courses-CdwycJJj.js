import{r as o,f as V,t as M,j as e,B as N,u as P}from"./index-CyfqMSRO.js";import{T as q,a as B,b as _,c as j,d as Q,e as p,u as H,f as R,M as z}from"./table-BWo1WtLU.js";import{I as K}from"./label-CnTJIlJR.js";import{S as $,a as W,b as G,c as J,d as k}from"./select-DOej6sjb.js";import{B as O}from"./badge-BLI5LmMG.js";import{H as X,S as Y,T as Z,C as ee,P as se}from"./config-drawer-D24KfPa3.js";import{c as U,F as ae}from"./content-api-CAfDKib3.js";import{U as re,C as te,E as le}from"./upload-course-logo-dialog-BSc8f7lw.js";import{u as ne,E as oe,S as ie,T as ce}from"./form-hqjEauTZ.js";import{C as L,a as D,b as T,c as A,d as E}from"./card-BNLdo4DD.js";import{M as f,A as de,s as me,t as xe,D as he,j as ue,k as ge,l as je,n as m,m as pe,N as fe}from"./sign-out-dialog-MZk34Vm3.js";import{g as Ne}from"./media-utils-Cpm_6zhn.js";import{E as Ce}from"./eye-DfvMNBib.js";import{U as ve}from"./upload-CvVwUS86.js";import{P as we}from"./plus-DJNX_MMf.js";import{D as be}from"./download-CVfOMqpg.js";import"./createLucideIcon-aSoT_QN5.js";import"./image-BaOUK5NR.js";import"./loader-circle-CAEVVdok.js";function ye({data:l,isLoading:C,onEdit:v,onViewLessons:w,onViewChapters:x,onRefresh:r}){const[h,a]=o.useState(!1),[u,t]=o.useState(!1),[n,i]=o.useState(null),g=V(),c=ne({mutationFn:s=>U.courses.delete(s),onSuccess:s=>{M.success(s.message),g.invalidateQueries({queryKey:["courses"]}),r(),a(!1),i(null)},onError:s=>{M.error("Failed to delete course"),console.error("Delete error:",s)}}),b=s=>{i(s),a(!0)},y=s=>{i(s),t(!0)},S=()=>{n&&c.mutate(n.id)},d=()=>{g.invalidateQueries({queryKey:["courses"]}),r(),t(!1),i(null)};return C?e.jsxs(L,{children:[e.jsxs(D,{children:[e.jsx(T,{children:"Courses"}),e.jsx(A,{children:"Loading..."})]}),e.jsx(E,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):l.length===0?e.jsxs(L,{children:[e.jsxs(D,{children:[e.jsx(T,{children:"Courses"}),e.jsx(A,{children:"No courses found"})]}),e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(f,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["No courses have been created yet.",e.jsx("br",{}),'Click "Add Course" to get started.']})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(L,{className:"border-0 shadow-lg bg-gradient-to-br from-card via-card to-card/95",children:[e.jsx(D,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(T,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(f,{className:"h-5 w-5 text-primary"}),"Courses (",l.length,")"]}),e.jsx(A,{className:"mt-1",children:"Manage educational courses and their content"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Courses"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:l.length})]})]})}),e.jsx(E,{children:e.jsxs(q,{children:[e.jsx(B,{children:e.jsxs(_,{children:[e.jsx(j,{children:"Course"}),e.jsx(j,{children:"Languages"}),e.jsx(j,{children:"Logo"}),e.jsx(j,{className:"w-[70px]",children:"Actions"})]})}),e.jsx(Q,{children:l.map(s=>e.jsxs(_,{children:[e.jsx(p,{className:"max-w-[350px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-medium truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: #",s.id]})]})}),e.jsx(p,{className:"max-w-[200px]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"font-medium text-blue-600",children:s.native_language}),e.jsx("span",{className:"text-muted-foreground",children:"→"}),e.jsx("span",{className:"font-medium text-green-600",children:s.learning_language})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Native → Target"})]})}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.logo_url?e.jsxs("div",{className:"relative",children:[e.jsxs(de,{className:"h-10 w-10 border-2 border-green-200",children:[e.jsx(me,{src:Ne(s.logo_url),alt:s.title}),e.jsx(xe,{className:"bg-green-50",children:e.jsx(f,{className:"h-5 w-5 text-green-600"})})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:e.jsx(f,{className:"h-5 w-5 text-gray-400"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-gray-300 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`text-xs font-medium ${s.logo_url?"text-green-600":"text-gray-500"}`,children:s.logo_url?"✓ Logo uploaded":"○ No logo"}),e.jsx("span",{className:"text-[10px] text-muted-foreground",children:s.logo_url?"Ready to display":"Upload recommended"})]})]})}),e.jsx(p,{children:e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(N,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(oe,{className:"h-4 w-4"})]})}),e.jsxs(ge,{align:"end",children:[e.jsx(je,{children:"Actions"}),e.jsxs(m,{onClick:()=>x(s),children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"View Chapters"]}),e.jsxs(m,{onClick:()=>w(s),children:[e.jsx(Ce,{className:"mr-2 h-4 w-4"}),"View Lessons"]}),e.jsx(pe,{}),e.jsxs(m,{onClick:()=>y(s),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Upload Logo"]}),e.jsxs(m,{onClick:()=>v(s),children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(m,{onClick:()=>b(s),className:"text-red-600",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]})})]}),e.jsx(fe,{open:h,onOpenChange:a,title:"Delete Course",desc:`Are you sure you want to delete "${n?.title}"? This action cannot be undone and will also delete all associated lessons and words.`,confirmText:"Delete",handleConfirm:S,isLoading:c.isPending}),n&&e.jsx(re,{open:u,onOpenChange:t,course:n,onSuccess:d})]})}function Se(){const l=P(),[C,v]=o.useState(null),[w,x]=o.useState(!1),[r,h]=o.useState(""),[a,u]=o.useState("all"),{data:t=[],isLoading:n,refetch:i}=H({queryKey:["courses"],queryFn:()=>U.courses.list()}),g=[...new Set([...t.map(s=>s.native_language),...t.map(s=>s.learning_language)])].sort(),c=t.filter(s=>{const F=s.title.toLowerCase().includes(r.toLowerCase())||s.native_language.toLowerCase().includes(r.toLowerCase())||s.learning_language.toLowerCase().includes(r.toLowerCase()),I=a==="all"||s.native_language===a||s.learning_language===a;return F&&I}),b=s=>{v(s),x(!0)},y=s=>{l({to:"/content/lessons",search:{courseId:s.id}})},S=s=>{l({to:"/content/chapters",search:{courseId:s.id}})},d=()=>{i()};return e.jsxs(e.Fragment,{children:[e.jsxs(X,{children:[e.jsx(R,{links:Le}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Y,{}),e.jsx(Z,{}),e.jsx(ee,{}),e.jsx(se,{})]})]}),e.jsxs(z,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Course Management"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Create and manage language learning courses"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(te,{onSuccess:d,children:e.jsxs(N,{size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(we,{className:"mr-2 h-5 w-5"}),"Add Course"]})})})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{placeholder:"Search courses...",value:r,onChange:s=>h(s.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{value:a,onValueChange:u,children:[e.jsx(W,{className:"w-[160px]",children:e.jsx(G,{placeholder:"All Languages"})}),e.jsxs(J,{children:[e.jsx(k,{value:"all",children:"All Languages"}),g.map(s=>e.jsx(k,{value:s,children:s},s))]})]}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(be,{className:"h-4 w-4"}),"Export"]})]})]}),(r||a!=="all")&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[e.jsxs("span",{children:["Showing ",c.length," of ",t.length," courses"]}),r&&e.jsxs(O,{variant:"secondary",children:['Search: "',r,'"']}),a!=="all"&&e.jsxs(O,{variant:"secondary",children:["Language: ",a]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:()=>{h(""),u("all")},children:"Clear filters"})]}),e.jsx(ye,{data:c,isLoading:n,onEdit:b,onViewLessons:y,onViewChapters:S,onRefresh:d})]}),e.jsx(le,{course:C,open:w,onOpenChange:x,onSuccess:d})]})}const Le=[{title:"Courses",href:"/content/courses",isActive:!0,disabled:!1},{title:"Lessons",href:"/content/lessons",isActive:!1,disabled:!1},{title:"Words",href:"/content/words",isActive:!1,disabled:!1}],Ke=Se;export{Ke as component};
