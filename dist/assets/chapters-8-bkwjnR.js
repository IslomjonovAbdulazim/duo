import{u as w,v as b,r as n,j as e,B as i}from"./index-DhlrxD8U.js";import{u as p,f as S,M as E,B as L}from"./badge-Ct8Vgg9v.js";import{I as A}from"./label-D57xkuOB.js";import{H as D,g as B,T as k,h as P,P as T}from"./config-drawer-BBMBhPkJ.js";import{c as x}from"./content-api-Cb5C8w-T.js";import{C as q,a as z,E as F}from"./chapters-table-DWRsqJj4.js";import{A as I}from"./arrow-left-DMFuqtng.js";import{P as M}from"./plus-CQEdPNJd.js";import{D as O}from"./download-CJlOy1NA.js";import"./createLucideIcon-BpZIlgW9.js";import"./form-o3u7YShS.js";import"./card-sg1o2DPf.js";function Q(){const o=w(),{courseId:s}=b({from:"/_authenticated/content/chapters"}),[f,u]=n.useState(null),[g,l]=n.useState(!1),[a,d]=n.useState("");n.useEffect(()=>{s||o({to:"/content/courses"})},[s,o]);const{data:r,isLoading:j}=p({queryKey:["courses",s],queryFn:()=>x.courses.get(s),enabled:!!s}),{data:h=[],isLoading:v,refetch:C}=p({queryKey:["chapters",s],queryFn:()=>x.chapters.listByCourse(s),enabled:!!s}),m=h.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())),N=t=>{u(t),l(!0)},c=()=>{C()},y=()=>{o({to:"/content/courses"})};return s?e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx(S,{links:R}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(B,{}),e.jsx(k,{}),e.jsx(P,{}),e.jsx(T,{})]})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:y,className:"px-2",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Chapter Management"}),r&&e.jsxs("p",{className:"text-muted-foreground text-lg",children:[r.title," • ",r.native_language," → ",r.learning_language]})]})]})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(q,{courseId:s,onSuccess:c,children:e.jsxs(i,{size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Add Chapter"]})})})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(A,{placeholder:"Search chapters...",value:a,onChange:t=>d(t.target.value),className:"w-full"})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"h-4 w-4"}),"Export"]})})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[e.jsxs("span",{children:["Showing ",m.length," of ",h.length," chapters"]}),e.jsxs(L,{variant:"secondary",children:['Search: "',a,'"']}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>d(""),children:"Clear filters"})]}),e.jsx(z,{data:m,isLoading:v||j,onEdit:N,onRefresh:c})]}),e.jsx(F,{chapter:f,open:g,onOpenChange:l,onSuccess:c})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}const R=[{title:"Courses",href:"/content/courses",isActive:!1,disabled:!1},{title:"Chapters",href:"/content/chapters",isActive:!0,disabled:!1},{title:"Lessons",href:"/content/lessons",isActive:!1,disabled:!1},{title:"Words",href:"/content/words",isActive:!1,disabled:!1}],ee=Q;export{ee as component};
