import{u as w,y as b,r as i,j as e,B as o}from"./index-CIznyvT-.js";import{u as p,T as S,M as E,B as L}from"./badge-DxcHkDxW.js";import{I as A}from"./label-CEBZcGQb.js";import{H as D,T as B,P as T}from"./theme-switch-CCCPDT63.js";import{S as k,C as P}from"./config-drawer-h1H3UycH.js";import{c as x}from"./content-api-C9bO89CJ.js";import{C as q,a as z,E as F}from"./chapters-table-DWA97ZgV.js";import{A as I}from"./arrow-left-_Kdayr4f.js";import{P as M}from"./plus-B47FFzf9.js";import{D as O}from"./download-BmH_hhGN.js";import"./createLucideIcon-DdyNmu3y.js";import"./index-DpUmRrGR.js";import"./rotate-ccw-CjyGH0hu.js";import"./trash-2-CUZpChJ1.js";import"./form-D5vjDCxC.js";import"./card-COu94R6X.js";import"./table-BgZtDiCD.js";function Q(){const n=w(),{courseId:s}=b({from:"/_authenticated/content/chapters"}),[f,u]=i.useState(null),[g,l]=i.useState(!1),[a,d]=i.useState("");i.useEffect(()=>{s||n({to:"/content/courses"})},[s,n]);const{data:r,isLoading:j}=p({queryKey:["courses",s],queryFn:()=>x.courses.get(s),enabled:!!s}),{data:m=[],isLoading:v,refetch:C}=p({queryKey:["chapters",s],queryFn:()=>x.chapters.listByCourse(s),enabled:!!s}),h=m.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())),y=t=>{u(t),l(!0)},c=()=>{C()},N=()=>{n({to:"/content/courses"})};return s?e.jsxs(e.Fragment,{children:[e.jsxs(D,{children:[e.jsx(S,{links:R}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(k,{}),e.jsx(B,{}),e.jsx(P,{}),e.jsx(T,{})]})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{variant:"ghost",size:"sm",onClick:N,className:"px-2",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Chapter Management"}),r&&e.jsxs("p",{className:"text-muted-foreground text-lg",children:[r.title," • ",r.native_language," → ",r.learning_language]})]})]})}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(q,{courseId:s,onSuccess:c,children:e.jsxs(o,{size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(M,{className:"mr-2 h-5 w-5"}),"Add Chapter"]})})})]}),e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(A,{placeholder:"Search chapters...",value:a,onChange:t=>d(t.target.value),className:"w-full"})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"h-4 w-4"}),"Export"]})})]}),a&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-6",children:[e.jsxs("span",{children:["Showing ",h.length," of ",m.length," chapters"]}),e.jsxs(L,{variant:"secondary",children:['Search: "',a,'"']}),e.jsx(o,{variant:"ghost",size:"sm",onClick:()=>d(""),children:"Clear filters"})]}),e.jsx(z,{data:h,isLoading:v||j,onEdit:y,onRefresh:c})]}),e.jsx(F,{chapter:f,open:g,onOpenChange:l,onSuccess:c})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}const R=[{title:"Courses",href:"/content/courses",isActive:!1,disabled:!1},{title:"Chapters",href:"/content/chapters",isActive:!0,disabled:!1},{title:"Lessons",href:"/content/lessons",isActive:!1,disabled:!1},{title:"Words",href:"/content/words",isActive:!1,disabled:!1}],ie=Q;export{ie as component};
